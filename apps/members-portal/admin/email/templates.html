<!DOCTYPE html>
<html lang="is">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title id="page-title">Loading...</title>

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">

  <!-- Reuse member portal styles -->
  <link rel="stylesheet" href="/styles/bundle.css?v=20251217k">

  <!-- Admin-specific styles -->
  <link rel="stylesheet" href="/admin/styles/admin.css?v=20251027b">
</head>
<body class="authenticated admin">
  <!-- Navigation component inserted here -->

  <!-- Page Content -->
  <div class="page__container">
    <!-- Page Header -->
    <div class="card">
      <div class="card__header">
        <div>
          <h1 class="card__title" id="templates-title">Loading...</h1>
          <p class="card__subtitle" id="templates-subtitle">Loading...</p>
        </div>
        <button class="btn btn--primary" id="create-template-btn">Loading...</button>
      </div>
    </div>

    <!-- Templates List -->
    <div class="card">
      <div id="templates-loading" class="loading-state">
        <div class="loading-spinner"></div>
        <p>Hleð sniðmátum...</p>
      </div>

      <div id="templates-empty" class="empty-state u-hidden">
        <p id="templates-empty-text">Loading...</p>
        <button class="btn btn--primary" id="create-first-template-btn">Loading...</button>
      </div>

      <table class="data-table u-hidden" id="templates-table">
        <thead>
          <tr>
            <th id="th-name">Loading...</th>
            <th id="th-subject">Loading...</th>
            <th id="th-type">Loading...</th>
            <th id="th-language">Loading...</th>
            <th id="th-actions">Loading...</th>
          </tr>
        </thead>
        <tbody id="templates-tbody">
          <!-- Templates will be inserted here -->
        </tbody>
      </table>
    </div>

    <!-- Back Links -->
    <div class="card">
      <a href="/admin/email/" class="btn btn--secondary" id="back-to-email">Loading...</a>
    </div>
  </div>

  <!-- Template Editor Modal -->
  <div class="modal u-hidden" id="template-modal">
    <div class="modal__backdrop"></div>
    <div class="modal__content modal__content--large">
      <div class="modal__header">
        <h2 class="modal__title" id="modal-title">Loading...</h2>
        <button class="modal__close" id="modal-close">&times;</button>
      </div>
      <div class="modal__body">
        <form id="template-form">
          <input type="hidden" id="template-id">

          <div class="form-group">
            <label for="template-name" id="label-name">Loading...</label>
            <input type="text" id="template-name" class="form-input" required>
          </div>

          <div class="form-group">
            <label for="template-subject" id="label-subject">Loading...</label>
            <input type="text" id="template-subject" class="form-input" required>
          </div>

          <div class="form-row">
            <div class="form-group form-group--half">
              <label for="template-type" id="label-type">Loading...</label>
              <select id="template-type" class="form-select" required>
                <option value="transactional" id="opt-transactional">Loading...</option>
                <option value="broadcast" id="opt-broadcast">Loading...</option>
              </select>
            </div>
            <div class="form-group form-group--half">
              <label for="template-language" id="label-language">Loading...</label>
              <select id="template-language" class="form-select" required>
                <option value="is" id="opt-lang-is">Loading...</option>
                <option value="en" id="opt-lang-en">Loading...</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label for="template-body" id="label-body">Loading...</label>
            <textarea id="template-body" class="form-textarea" rows="15" required></textarea>
            <p class="form-help">Notaðu {{ member.name }}, {{ member.email }}, {{ cell.name }} o.fl.</p>
          </div>
        </form>
      </div>
      <div class="modal__footer">
        <button class="btn btn--secondary" id="modal-cancel">Loading...</button>
        <button class="btn btn--primary" id="modal-save">Loading...</button>
      </div>
    </div>
  </div>

  <script type="module" src="/admin/email/js/templates-list.js?v=20251218"></script>

  <!-- Initialize Navigation Component -->
  <script type="module">
    import { initNavHeader, NAV_CONFIGS } from '../../../ui/components/navigation-bar.js?v=20251217';
    await initNavHeader(NAV_CONFIGS.admin);
  </script>

</body>
</html>
