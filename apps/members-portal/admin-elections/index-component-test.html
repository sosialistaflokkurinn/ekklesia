<!DOCTYPE html>
<html lang="is">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title id="page-title">Loading...</title>
  
  <!-- Global Styles -->
  <link rel="stylesheet" href="../styles/global.css">
  <link rel="stylesheet" href="../styles/components/nav.css">
  <link rel="stylesheet" href="../styles/components/page.css">
  <link rel="stylesheet" href="../styles/components/toast.css">
  <link rel="stylesheet" href="../styles/components/modal.css">
  <link rel="stylesheet" href="../styles/components/badge.css">
  <link rel="stylesheet" href="../admin/styles/admin.css">
  <link rel="stylesheet" href="./styles/admin-elections.css">
  
  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  
  <!-- Firebase Init -->
  <script type="module" src="../firebase/app.js"></script>
</head>
<body class="authenticated admin">

  <!-- Skip Link for Accessibility -->
  <a href="#main-content" class="u-skip-link">Fara beint √≠ efni</a>
  
  <!-- Navigation will be inserted here by component -->
  
  <!-- Main Content -->
  <main class="admin-main" id="main-content">
    <div class="admin-container">

      <!-- Filters and Search -->
      <!-- Elections Controls -->
      <div class="elections-controls">
        <div class="filters" role="group" aria-label="S√≠ur fyrir kosningar">
          <button class="filter-btn active" data-filter="all" id="filter-all" aria-pressed="true" aria-label="S√Ωna allar kosningar">Loading...</button>
          <button class="filter-btn" data-filter="draft" id="filter-draft" aria-pressed="false" aria-label="S√Ωna dr√∂g">Loading...</button>
          <button class="filter-btn" data-filter="published" id="filter-published" aria-pressed="false" aria-label="S√Ωna opnar kosningar">Loading...</button>
          <button class="filter-btn" data-filter="closed" id="filter-closed" aria-pressed="false" aria-label="S√Ωna loka√∞ar kosningar">Loading...</button>
          <button class="filter-btn" data-filter="hidden" id="filter-hidden" aria-pressed="false" aria-label="S√Ωna faldar kosningar">Loading...</button>
        </div>
        
        <div class="elections-controls-right">
          <div class="search-box">
            <label for="search-input" class="u-sr-only">Leita a√∞ kosningum</label>
            <input 
              type="text" 
              id="search-input" 
              class="search-input" 
              placeholder="Leita..." 
              aria-label="Leita a√∞ kosningum"
            />
          </div>
          
          <a href="/admin-elections/create.html" class="btn btn--primary" id="create-election-btn">
            <span id="create-election-btn-text">Loading...</span>
          </a>
        </div>
      </div>

      <!-- Elections List -->
      <div class="elections-list" id="elections-list" aria-live="polite" aria-atomic="false">
        <!-- Loading state -->
        <div class="loading-indicator" id="loading-indicator" aria-live="polite" aria-busy="true">
          <div class="spinner"></div>
          <p id="loading-text">Loading...</p>
        </div>
      </div>

      <!-- Empty State -->
      <div class="empty-state" id="empty-state" style="display: none;" role="status" aria-live="polite">
        <div class="empty-state__icon">üó≥Ô∏è</div>
        <h2 id="empty-state-title">Loading...</h2>
        <p id="empty-state-description">Loading...</p>
        <button class="btn btn--primary" id="empty-state-btn">
          Loading...
        </button>
      </div>
      
    </div>
  </main>
  
  <!-- Initialize Navigation Component BEFORE main app -->
  <script type="module">
    import { initNavHeader, NAV_CONFIGS } from '../ui/components/navigation-bar.js';
    
    // Initialize navigation with Admin Elections config
    await initNavHeader({
      ...NAV_CONFIGS.adminElections,
      links: NAV_CONFIGS.adminElections.links.map((link, i) => ({
        ...link,
        active: i === 0  // First link (elections list) is active
      }))
    });
  </script>
  
  <!-- Main App -->
  <script type="module" src="./js/elections-list.js"></script>
  
</body>
</html>
