<!DOCTYPE html>
<html lang="is">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title id="page-title">Loading...</title>

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="stylesheet" href="/styles/global.css?v=20251106">
  <link rel="stylesheet" href="/styles/components/nav.css?v=20251106">
  <link rel="stylesheet" href="/styles/components/page.css?v=20251106">
  <link rel="stylesheet" href="/styles/components/election-detail.css?v=20251106">
</head>
<body class="authenticated">
  <nav class="nav">
    <div class="nav__container">
      <a href="/members-area/dashboard.html" class="nav__brand" id="nav-brand">Loading...</a>

      <!-- Hamburger Button (mobile only) -->
      <button class="nav__hamburger" id="nav-hamburger" aria-expanded="false">
        <span class="nav__hamburger-line"></span>
        <span class="nav__hamburger-line"></span>
        <span class="nav__hamburger-line"></span>
      </button>

      <!-- Overlay for mobile menu -->
      <div class="nav__overlay" id="nav-overlay"></div>

      <!-- Navigation Drawer -->
      <div class="nav__drawer" id="nav-drawer" aria-hidden="true">
        <!-- Close button (mobile only) -->
        <button class="nav__close" id="nav-close">
          <span class="nav__close-icon">✕</span>
        </button>

        <div class="nav__links">
          <a href="/members-area/dashboard.html" class="nav__link" id="nav-dashboard">Loading...</a>
          <a href="/members-area/profile.html" class="nav__link" id="nav-profile">Loading...</a>
          <a href="/members-area/events.html" class="nav__link" id="nav-events">Loading...</a>
          <a href="/members-area/elections.html" class="nav__link nav__link--active" id="nav-voting">Loading...</a>
          <a href="#" class="nav__link nav__link--logout" id="nav-logout">Loading...</a>
        </div>
      </div>
    </div>
  </nav>

  <div class="page__container">
    <!-- Loading State -->
    <div id="election-loading" class="election-detail__loading u-hidden">
      <div class="spinner"></div>
      <p id="loading-message">Loading...</p>
    </div>

    <!-- Error State -->
    <div id="election-error" class="election-detail__error u-hidden">
      <p id="error-message">Loading...</p>
      <button id="retry-button" class="btn">Loading...</button>
    </div>

    <!-- Election Detail Content -->
    <article id="election-content" class="election-detail u-hidden">
      <!-- Back Button -->
      <div class="election-detail__back">
        <a href="/members-area/elections.html" class="election-detail__back-link" id="back-link">
          ← <span id="back-text">Loading...</span>
        </a>
      </div>

      <!-- Header -->
      <header class="election-detail__header">
        <div class="election-detail__header-top">
          <h1 class="election-detail__title" id="election-title">Loading...</h1>
          <span class="election-detail__status-badge" id="election-status-badge">Loading...</span>
        </div>

        <!-- Already Voted Badge -->
        <div id="already-voted-badge" class="election-detail__voted-badge u-hidden">
          <span id="voted-badge-text">Loading...</span>
        </div>
      </header>

      <!-- Election Info -->
      <section class="election-detail__info">
        <div class="election-detail__schedule">
          <div class="election-detail__schedule-item">
            <span class="election-detail__schedule-label" id="schedule-starts-label">Loading...</span>
            <span class="election-detail__schedule-value" id="schedule-starts-value">Loading...</span>
          </div>
          <div class="election-detail__schedule-item">
            <span class="election-detail__schedule-label" id="schedule-ends-label">Loading...</span>
            <span class="election-detail__schedule-value" id="schedule-ends-value">Loading...</span>
          </div>
        </div>

        <div class="election-detail__description" id="election-description">
          <!-- Optional description will be inserted here -->
        </div>
      </section>

      <!-- Question -->
      <section class="election-detail__question">
        <h2 class="election-detail__question-title" id="question-title-label">Loading...</h2>
        <p class="election-detail__question-text" id="question-text">Loading...</p>
      </section>

      <!-- Voting Section (shown if active and not voted) -->
      <section id="voting-section" class="election-detail__voting u-hidden">
        <h3 class="election-detail__voting-title" id="voting-title">Loading...</h3>

        <!-- Answer Options -->
        <form id="voting-form" class="election-detail__voting-form">
          <div id="answer-options" class="election-detail__answer-options">
            <!-- Answer options will be inserted dynamically -->
          </div>

          <button type="submit" id="vote-button" class="btn btn--primary election-detail__vote-btn" disabled>
            <span id="vote-button-text">Loading...</span>
          </button>
        </form>
      </section>

      <!-- Results Section (shown if closed) -->
      <section id="results-section" class="election-detail__results u-hidden">
        <h3 class="election-detail__results-title" id="results-title">Loading...</h3>

        <div class="election-detail__results-summary">
          <span id="results-total-votes-label">Loading...</span>
          <span id="results-total-votes" class="election-detail__results-total">0</span>
        </div>

        <div id="results-list" class="election-detail__results-list">
          <!-- Results will be inserted dynamically -->
        </div>
      </section>

      <!-- Upcoming Section (shown if upcoming) -->
      <section id="upcoming-section" class="election-detail__upcoming u-hidden">
        <p id="upcoming-message" class="election-detail__upcoming-message">Loading...</p>
      </section>
    </article>

    <!-- Confirmation Modal -->
    <div id="confirmation-modal" class="modal u-hidden" role="dialog" aria-modal="true" aria-labelledby="modal-title">
      <div class="modal__overlay"></div>
      <div class="modal__container">
        <div class="modal__header">
          <h3 id="modal-title" class="modal__title">Loading...</h3>
          <button id="modal-close" class="modal__close" aria-label="Close">&times;</button>
        </div>
        <div class="modal__body">
          <p id="modal-message">Loading...</p>
          <p id="modal-selected-answer" class="modal__selected-answer"></p>
        </div>
        <div class="modal__footer">
          <button id="modal-cancel" class="btn btn--secondary">Loading...</button>
          <button id="modal-confirm" class="btn btn--primary">Loading...</button>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="/js/election-detail.js?v=20251106"></script>
</body>
</html>
